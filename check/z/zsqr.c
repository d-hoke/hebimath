#include <hebimath.h>
#include <assert.h>
#include <string.h>

static const char a1[] =
"11579208923731619542357098500868790785326998"
"4665640564039457584007913129639935";

// a1^2
static const char p1[] =
"13407807929942597099574024998205846127479365820592393377723561443721"
"76403007331539262339966577605628572001448237077951088442260168386765"
"4778417822746804225";

static const char a2[] =
"-4492063843912230014799367859725123322501730271090452280466118014429"
"27064302636834154410996201684971452731796568143824709682618721918238"
"03221725318171631135376769195405483845675327748730416164284465201173"
"53853919904741183913241461064954951130481876954108487734330464009613"
"73048924208147396449783478226323587546092341163899596475211495332475"
"15978500846891035876607281498664701264078647598366688594440812061922"
"49061609168661981727061708101699287807121139682394269251405704701748"
"04009151796837140043453962285317418711281012971393620301066810711957"
"99812813178964056069682521891504569926852608834859890426365193728387"
"60610459";

// a2^2
static const char p2[] =
"20178637577783519581791354123755899695827489255844502020803775130559"
"31259410675863028375579235479276262679987971185691777937731112201182"
"67689762778846704682030611947335727501382168668850680867713189623495"
"45529897152318027216694397129207156844786493416161989334018271269511"
"57304300250436529593485792974740947110589953960989897835700087997461"
"00706704510319938193160824525041724081385389023873502619766630170048"
"16660797177189223429063183401540749284744073209097577470471522242589"
"00839081867527248243556826974038962459905265720711709505634219141926"
"11437882403757345643536026479228823924258095449162678458539951030360"
"05059342085118432678281433215474145494614001905552310599686060392469"
"44865162915789355724889415023783436707074298091003318375131562184000"
"77447718706726294296568268099879459906249497401218491600958463485895"
"89389753332044754251809203892903894841259723243775304695390369374414"
"91711328953398550842730076935565709860516616246618839153289036993088"
"70376933538671900555279134646941158431653062262859414344272043587877"
"34277641432537269663289016277525667996838002580044138368386212648972"
"44632938154390485813409461156136910821404766498636882210733444526132"
"45364847609572410330351369361109364410285993638416816583193149179851"
"53554340190681";

int main(int argc, char *argv[])
{
	hebi_z a, p, e;

	hebi_zinit(a);
	hebi_zinit(p);
	hebi_zinit(e);

	assert(hebi_zsqr(p, a) == hebi_success);
	assert(hebi_zcapacity(p) == 0 && hebi_zused(p) == 0);

	assert(hebi_zsetstr(a, a1, NULL, 0) == hebi_success);
	assert(hebi_zsetstr(e, p1, NULL, 0) == hebi_success);
	assert(hebi_zsqr(p, a) == hebi_success);
	assert(!hebi_zcmp(p, e));

	assert(hebi_zsetstr(a, a2, NULL, 0) == hebi_success);
	assert(hebi_zsetstr(e, p2, NULL, 0) == hebi_success);
	assert(hebi_zsqr(p, a) == hebi_success);
	assert(!hebi_zcmp(p, e));

	hebi_zdestroy(a);
	hebi_zdestroy(p);
	hebi_zdestroy(e);

	return 0;
}
